(this["webpackJsonpcard-editor-react"]=this["webpackJsonpcard-editor-react"]||[]).push([[0],{14:function(e,a,t){e.exports={root:"App_root__2q3oI",root__section:"App_root__section__1e4n_"}},16:function(e,a,t){e.exports={userInfo:"userInfo_userInfo__19G6_",userInfo__photo:"userInfo_userInfo__photo__N60hs",userInfo__data:"userInfo_userInfo__data__3SShx",userInfo__name:"userInfo_userInfo__name__3IhXa",userInfo__job:"userInfo_userInfo__job__3-pzT",userInfo__btnEdit:"userInfo_userInfo__btnEdit__3IePE",userInfo__button:"userInfo_userInfo__button__21zgC"}},17:function(e,a,t){e.exports={placeCard:"placeCard_placeCard__2VbrE",placeCard__image:"placeCard_placeCard__image__2zy-S",placeCard__deleteIcon:"placeCard_placeCard__deleteIcon__3ZiNQ",placeCard__description:"placeCard_placeCard__description__35mzw",placeCard__name:"placeCard_placeCard__name__WEOqV",placeCard__likeIcon:"placeCard_placeCard__likeIcon__HZn_u",placeCard__likeNumber:"placeCard_placeCard__likeNumber__1PcKL"}},18:function(e,a,t){e.exports=t.p+"static/media/close.a3e3d9bd.svg"},21:function(e,a,t){e.exports={button:"button_button__2K9y5"}},30:function(e,a,t){e.exports=t.p+"static/media/like-active.429c8752.svg"},31:function(e,a,t){e.exports=t.p+"static/media/like-inactive.ed9e50d5.svg"},41:function(e,a,t){e.exports={header:"header_header__29J7q"}},42:function(e,a,t){e.exports={logo:"logo_logo__1fFMn"}},43:function(e,a,t){e.exports=t.p+"static/media/logo.9d0e3a93.svg"},44:function(e,a,t){e.exports={profile:"profile_profile__2Gl8U"}},45:function(e,a,t){e.exports={placesList:"placesList_placesList__1cozs"}},47:function(e,a,t){e.exports=t(78)},5:function(e,a,t){e.exports={popup:"popup_popup__UQNqW",popup__content:"popup_popup__content__1N2O3",popup__image:"popup_popup__image__3fgVk",popup__contentImage:"popup_popup__contentImage__D_Iet",popup__close:"popup_popup__close__1F-4u",popup__title:"popup_popup__title__EdVIv",popup__form:"popup_popup__form__2YY4Q",popup__input:"popup_popup__input__R8ZUt",popup__button:"popup_popup__button__qPSp-",popup__button_user:"popup_popup__button_user__3KtTp"}},58:function(e,a,t){},78:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(22),o=t.n(c),p=t(6),u=(t(58),t(14)),l=t.n(u),s=t(41),i=t.n(s),_=t(42),d=t.n(_),m=t(43),f=t.n(m);var b=function(){return r.a.createElement("img",{className:d.a.logo,src:f.a,alt:"mesto logo"})};var E=function(){return r.a.createElement("header",{className:[i.a.header,l.a.root__section].join(" ")},r.a.createElement(b,null))},O=t(11),y=t.n(O),v=t(44),j=t.n(v),C=t(10),k=t(16),I=t.n(k),P="edit-submit",N="add-card-submit",g="open-popup-card",h="open-popup-edit",D=t(21),A=t.n(D),x=function(e){return{type:"OPEN_EDIT_POPUP",payload:e.payload}},R=function(e){return{type:"OPEN_ADD_CARD_POPUP",payload:e.payload}},w=function(e){return{type:"OPEN_IMAGE_POPUP",payload:e.payload}},S=function(e){var a=e.type,t=e.className,n=e.disabled,c=Object(p.b)();switch(a){case g:return r.a.createElement("button",{onClick:function(){return c(R({type:"OPEN_ADD_CARD_POPUP",payload:!0}))},className:y()(A.a.button,t),disabled:n,style:{cursor:n?"wait":"pointer"}},"+");case h:return r.a.createElement("button",{onClick:function(){return c(x({type:"OPEN_EDIT_POPUP",payload:!0}))},className:t},"Edit")}},L=t(15),T=t(4),U=t(18),q=t.n(U),G=t(5),V=t.n(G),K=function(e){var a=e.type,t=e.className;Object(p.b)();switch(a){case P:case N:return r.a.createElement("button",{type:"submit",className:y()(A.a.button,t)},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c")}return r.a.createElement("div",null)},M=function(){var e=Object(p.b)(),a=Object(n.useState)({name:"",link:""}),t=Object(C.a)(a,2),c=t[0],o=t[1];Object(n.useEffect)((function(){document.addEventListener("keydown",(function(a){"Escape"===String(a.key)&&e(R({type:"OPEN_ADD_CARD_POPUP",payload:!1}))}))}),[]);return r.a.createElement("div",{id:"addUserPopup",className:V.a.popup},r.a.createElement("div",{className:V.a.popup__content},r.a.createElement("img",{onClick:function(){return e(R({type:"OPEN_ADD_CARD_POPUP",payload:!1}))},src:q.a,alt:"close",className:V.a.popup__close}),r.a.createElement("h3",{className:V.a.popup__title},"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e"),r.a.createElement("form",{onSubmit:function(a){a.preventDefault(),e({type:"CREATE_CARD",payload:{type:"CREATE_CARD",payload:c}.payload}),e(R({type:"OPEN_ADD_CARD_POPUP",payload:!1})),e({type:"POST_ADD_CARD"})},className:V.a.popup__form,noValidate:!0,name:"new"},r.a.createElement("div",{className:"input-container "},r.a.createElement("input",Object(L.a)({onChange:function(e){return o(Object(T.a)(Object(T.a)({},c),{},{name:e.target.value}))},id:"title",type:"text",minLength:"2",maxLength:"30",required:!0,name:"title",className:V.a.popup__input,placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"},"required",!0)),r.a.createElement("span",{id:"title-error",className:"error"})),r.a.createElement("div",{className:"input-container "},r.a.createElement("input",Object(L.a)({onChange:function(e){return o(Object(T.a)(Object(T.a)({},c),{},{link:e.target.value}))},id:"url",type:"url",required:!0,name:"link",className:V.a.popup__input,placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443"},"required",!0)),r.a.createElement("span",{id:"url-error",className:"error"})),r.a.createElement(K,{type:N,className:y()(V.a.popup__button,V.a.popup__button_user)}))))},z=function(e){var a=e.popupStore,t=Object(p.c)((function(e){return e.cards.items})),c=Object(p.c)((function(e){return e.user})).user,o=Object(n.useState)(!1),u=Object(C.a)(o,2),l=u[0],s=u[1];return Object(n.useEffect)((function(){s(0===(null===t||void 0===t?void 0:t.length)&&!0)}),[t.length]),r.a.createElement("div",{className:I.a.userInfo},r.a.createElement("div",{className:I.a.userInfo__photo}),r.a.createElement("div",{className:I.a.userInfo__data},r.a.createElement("h1",{className:I.a.userInfo__name},c.name),r.a.createElement("p",{className:I.a.userInfo__job},c.about),r.a.createElement(S,{type:h,className:I.a.userInfo__btnEdit})),r.a.createElement(S,{type:g,className:I.a.userInfo__button,disabled:l}),a.openAddCard&&r.a.createElement(M,null))},F=function(){var e=Object(p.b)();Object(n.useEffect)((function(){document.addEventListener("keydown",(function(a){"Escape"===String(a.key)&&e(x({type:"OPEN_EDIT_POPUP",payload:!1}))}))}),[]);var a=Object(n.useState)({name:"",about:""}),t=Object(C.a)(a,2),c=t[0],o=t[1];return r.a.createElement("div",{id:"addUserPopup",className:V.a.popup},r.a.createElement("div",{className:V.a.popup__content},r.a.createElement("img",{className:V.a.popup__close,src:q.a,alt:"close",onClick:function(){return e(x({type:"OPEN_EDIT_POPUP",payload:!1}))}}),r.a.createElement("h3",{className:V.a.popup__title},"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c"),r.a.createElement("form",{onSubmit:function(a){a.preventDefault(),e({type:"EDIT_USER",payload:{type:"EDIT_USER",payload:c}.payload}),e(x({type:"OPEN_EDIT_POPUP",payload:!1})),e({type:"PATCH_USER"})},className:V.a.popup__form,noValidate:!0,name:"new"},r.a.createElement("div",{className:"input-container "},r.a.createElement("input",Object(L.a)({onChange:function(e){return o(Object(T.a)(Object(T.a)({},c),{},{name:e.target.value}))},id:"name",type:"text",minLength:"2",maxLength:"30",name:"name",required:!0,className:V.a.popup__input,placeholder:"\u0418\u043c\u044f"},"required",!0)),r.a.createElement("span",{id:"name-error",className:V.a.error}),r.a.createElement("div",{className:"input-container "},r.a.createElement("input",Object(L.a)({onChange:function(e){return o(Object(T.a)(Object(T.a)({},c),{},{about:e.target.value}))},id:"job",type:"text",minLength:"2",maxLength:"30",name:"job",required:!0,className:V.a.popup__input,placeholder:"\u041e \u0441\u0435\u0431\u0435"},"required",!0)),r.a.createElement("span",{id:"job-error",className:V.a.error})),r.a.createElement(K,{type:P,className:"".concat(V.a.popup__button," ").concat(V.a.popup__button_user)})))))},W=function(){var e=Object(p.c)((function(e){return e.popup}));return r.a.createElement("div",{className:y()(j.a.profile,l.a.root__section)},r.a.createElement(z,{popupStore:e}),e.openEdit&&r.a.createElement(F,null))},H=t(45),J=t.n(H),Q=t(17),X=t.n(Q),Z=t(30),B=t.n(Z),Y=t(31),$=t.n(Y);var ee=function(e){var a=e.item,t=e.items,c=e.setItems,o=e.openPopupImage,u=Object(p.b)(),l=Object(p.c)((function(e){return e.user})),s=Object(n.useState)(!1),i=Object(C.a)(s,2),_=i[0],d=i[1];return Object(n.useEffect)((function(){var e=1===a.likes.filter((function(e){return e._id===l.user._id})).length;d(e)}),[a]),r.a.createElement("div",{className:X.a.placeCard},r.a.createElement("div",{onClick:function(e){return o(a)},id:"pic",className:X.a.placeCard__image,style:{backgroundImage:"url(".concat(a.link,")")}}),r.a.createElement("button",{onClick:function(e){return function(e){u({type:"DELETE_CARD",payload:{type:"DELETE_CARD",payload:e._id}.payload}),u({type:"DELETE_CARD_SAGA"});var a=t.filter((function(a){return a!==e}));c(a)}(a)},className:X.a.placeCard__deleteIcon}),r.a.createElement("div",{className:X.a.placeCard__description},r.a.createElement("h3",{className:X.a.placeCard__name},a.name),r.a.createElement("div",null,r.a.createElement("img",{onClick:function(e){return t=a._id,u(function(e){return{type:"LIKE_CARD",payload:e.payload}}({type:"LIKE_CARD",payload:{likeId:t,removeLike:!!_||_}})),void u({type:"LIKE_CARD_SAGA"});var t},src:_?B.a:$.a,alt:"like",className:X.a.placeCard__likeIcon}),r.a.createElement("p",{className:X.a.placeCard__likeNumber},a.likes.length))))},ae=function(e){var a=e.itemLink,t=Object(p.b)();Object(n.useEffect)((function(){document.addEventListener("keydown",(function(e){"Escape"===String(e.key)&&t(w({type:"OPEN_IMAGE_POPUP",payload:!1}))}))}),[]);return r.a.createElement("div",{id:"imagePopup",className:V.a.popup},r.a.createElement("div",{className:V.a.popup__contentImage},r.a.createElement("img",{onClick:function(){t({type:"OPEN_IMAGE_POPUP",payload:!1})},src:q.a,alt:"close",className:V.a.popup__close}),r.a.createElement("img",{src:a,className:V.a.popup__image,alt:""})))};var te=function(){var e=Object(p.b)(),a=Object(p.c)((function(e){return e.cards.items})),t=Object(p.c)((function(e){return e.popup})),c=Object(n.useState)(""),o=Object(C.a)(c,2),u=o[0],s=o[1],i=Object(n.useState)([]),_=Object(C.a)(i,2),d=_[0],m=_[1];Object(n.useEffect)((function(){m(a)}),[a||d]);var f=function(a){s(a.link),e(w({type:"OPEN_IMAGE_POPUP",payload:!0}))};return r.a.createElement("div",{className:[J.a.placesList,l.a.root__section].join(" ")},d.map((function(e){return r.a.createElement(ee,{openPopupImage:f,setItems:m,item:e,items:d})})),t.openImage&&r.a.createElement(ae,{itemLink:u}))},ne=t(13),re=t.n(ne);var ce=function(){return r.a.createElement("div",{className:l.a.root},r.a.createElement(E,null),r.a.createElement(W,null),r.a.createElement(te,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var oe=t(12),pe={openEdit:!1,openAddCard:!1,openImage:!1},ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"OPEN_EDIT_POPUP":return Object(T.a)(Object(T.a)({},e),{},{openEdit:a.payload});case"OPEN_ADD_CARD_POPUP":return Object(T.a)(Object(T.a)({},e),{},{openAddCard:a.payload});case"OPEN_IMAGE_POPUP":return Object(T.a)(Object(T.a)({},e),{},{openImage:a.payload});default:return e}},le=t(28),se={items:[],createCard:{link:"",name:""},addCard:{_id:"",link:"",name:"",likes:[]},deleteCardId:0,likeId:"",removeLike:!1},ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se,a=arguments.length>1?arguments[1]:void 0;switch(console.log(a),a.type){case"LOAD_CARDS":return Object(T.a)(Object(T.a)({},e),{},{items:a.payload});case"CREATE_CARD":return Object(T.a)(Object(T.a)({},e),{},{createCard:{link:a.payload.link,name:a.payload.name}});case"ADD_CARD":var t;return console.log(a.payload),t={likes:[],_id:a.payload._id,link:a.payload.link,name:a.payload.name},Object(T.a)(Object(T.a)({},e),{},{createCard:t,items:[].concat(Object(le.a)(e.items),[t])});case"DELETE_CARD":return Object(T.a)(Object(T.a)({},e),{},{deleteCardId:a.payload});case"LIKE_CARD":return Object(T.a)(Object(T.a)({},e),{},{likeId:a.payload.likeId,removeLike:a.payload.removeLike});case"FAVORITE_CARD":var n=e.items,r=e.items.findIndex((function(e){return e._id===a.payload._id}));return n.splice(r,1,a.payload),Object(T.a)(Object(T.a)({},e),{},{items:Object(le.a)(n)});default:return e}},_e={user:{about:"",avatar:"",cohort:"",name:"",_id:""}},de=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_e,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"EDIT_USER":return Object(T.a)(Object(T.a)({},e),{},{user:{about:a.payload.about,avatar:a.payload.avatar,cohort:a.payload.cohort,name:a.payload.name,_id:a.payload._id}});default:return e}},me=t(46),fe=t(8),be=t.n(fe),Ee=t(7),Oe=be.a.mark(Se),ye=be.a.mark(Le),ve=be.a.mark(Te),je=be.a.mark(Ue),Ce=be.a.mark(qe),ke=be.a.mark(Ge),Ie=be.a.mark(Ve),Pe="https://nomoreparties.co/cohort11",Ne={headers:{Authorization:"f19dbf25-1050-4e87-9f03-ebd68dde2c37"}},ge=function(){return re.a.get("".concat(Pe,"/cards"),Ne)},he=function(e){return re.a.patch("".concat(Pe,"/users/me"),e,Ne)},De=function(){return re.a.get("".concat(Pe,"/users/me"),Ne)},Ae=function(e){return re.a.post("".concat(Pe,"/cards"),e,Ne)},xe=function(e){return re.a.delete("".concat(Pe,"/cards/").concat(e),Ne)},Re=function(e){return re.a.put("".concat(Pe,"/cards/like/").concat(e),{id:e},Ne)},we=function(e){return re.a.delete("".concat(Pe,"/cards/like/").concat(e),Ne)};function Se(){var e,a,t,n,r;return be.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,c.next=3,Object(Ee.d)();case 3:if(e=c.sent,!(a=e.cards).removeLike){c.next=13;break}return c.next=8,Object(Ee.b)(we,a.likeId);case 8:n=c.sent,t={_id:n.data._id,link:n.data.link,name:n.data.name,likes:n.data.likes},console.log("\u0443\u0434\u0430\u043b\u0438\u0442\u044c \u043b\u0430\u0439\u043a",n),c.next=17;break;case 13:return c.next=15,Object(Ee.b)(Re,a.likeId);case 15:r=c.sent,t={_id:r.data._id,link:r.data.link,name:r.data.name,likes:r.data.likes};case 17:return c.next=19,Object(Ee.c)({type:"FAVORITE_CARD",payload:{type:"FAVORITE_CARD",payload:t}.payload});case 19:c.next=24;break;case 21:c.prev=21,c.t0=c.catch(0),console.log(c.t0);case 24:case"end":return c.stop()}}),Oe,null,[[0,21]])}function Le(){var e,a,t;return be.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(Ee.d)();case 2:return e=n.sent,a=e.cards,t=a.deleteCardId,n.next=7,Object(Ee.b)(xe,t);case 7:case"end":return n.stop()}}),ye)}function Te(){var e,a,t,n;return be.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(Ee.d)();case 3:return e=r.sent,a=e.cards,r.next=7,Object(Ee.b)(Ae,a.createCard);case 7:return t=r.sent,n={_id:t.data._id,link:t.data.link,name:t.data.name,likes:t.data.likes},r.next=11,Object(Ee.c)({type:"ADD_CARD",payload:{type:"ADD_CARD",payload:n}.payload});case 11:r.next=16;break;case 13:r.prev=13,r.t0=r.catch(0),console.log(r.t0);case 16:case"end":return r.stop()}}),ve,null,[[0,13]])}function Ue(){var e;return be.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(Ee.b)(De);case 3:return e=a.sent,a.next=6,Object(Ee.c)({type:"EDIT_USER",payload:e.data});case 6:a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),console.log(a.t0);case 11:case"end":return a.stop()}}),je,null,[[0,8]])}function qe(e){var a;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(Ee.b)(ge);case 3:return a=e.sent,e.next=6,Object(Ee.c)({type:"LOAD_CARDS",payload:a.data});case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),Ce,null,[[0,8]])}function Ge(){var e,a;return be.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(Ee.d)();case 3:return e=t.sent,a=e.user,t.next=7,Object(Ee.b)(he,a.user);case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0);case 12:case"end":return t.stop()}}),ke,null,[[0,9]])}function Ve(){return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ee.e)("PATCH_USER",Ge);case 2:return e.next=4,Object(Ee.e)("POST_ADD_CARD",Te);case 4:return e.next=6,Object(Ee.e)("DELETE_CARD_SAGA",Le);case 6:return e.next=8,Object(Ee.e)("LIKE_CARD_SAGA",Se);case 8:return e.next=10,Object(Ee.a)([qe(),Ue()]);case 10:case"end":return e.stop()}}),Ie)}var Ke=Object(me.a)(),Me=Object(oe.c)({popup:ue,cards:ie,user:de}),ze=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||oe.d,Fe=Object(oe.e)(Me,ze(Object(oe.a)(Ke)));Ke.run(Ve);var We=Fe;o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(p.a,{store:We},r.a.createElement(ce,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[47,1,2]]]);
//# sourceMappingURL=main.ea0b5c67.chunk.js.map
(this["webpackJsonpcard-editor-react"]=this["webpackJsonpcard-editor-react"]||[]).push([[0],{13:function(e,a,t){e.exports={root:"App_root__1kxhz",root__section:"App_root__section__36TP1"}},14:function(e,a,t){e.exports={userInfo:"userInfo_userInfo__mqict",userInfo__photo:"userInfo_userInfo__photo__n-Uae",userInfo__data:"userInfo_userInfo__data__27SjN",userInfo__name:"userInfo_userInfo__name__29Cc_",userInfo__job:"userInfo_userInfo__job__2bLt0",userInfo__btnEdit:"userInfo_userInfo__btnEdit__1Q38r",userInfo__button:"userInfo_userInfo__button__3okI_"}},15:function(e,a,t){e.exports={placeCard:"placeCard_placeCard__2VbrE",placeCard__image:"placeCard_placeCard__image__2zy-S",placeCard__deleteIcon:"placeCard_placeCard__deleteIcon__3ZiNQ",placeCard__description:"placeCard_placeCard__description__35mzw",placeCard__name:"placeCard_placeCard__name__WEOqV",placeCard__likeIcon:"placeCard_placeCard__likeIcon__HZn_u",placeCard__likeNumber:"placeCard_placeCard__likeNumber__1PcKL"}},17:function(e,a,t){e.exports=t.p+"static/media/close.a3e3d9bd.svg"},20:function(e,a,t){e.exports={button:"button_button__2aRG4"}},29:function(e,a,t){e.exports=t.p+"static/media/like-active.429c8752.svg"},30:function(e,a,t){e.exports=t.p+"static/media/like-inactive.ed9e50d5.svg"},40:function(e,a,t){e.exports={profile:"profile_profile__2Gl8U"}},41:function(e,a,t){e.exports={placesList:"placesList_placesList__1cozs"}},42:function(e,a,t){e.exports={header:"header_header__1Jw1t"}},43:function(e,a,t){e.exports={logo:"logo_logo__zu08a"}},44:function(e,a,t){e.exports=t.p+"static/media/logo.9d0e3a93.svg"},46:function(e,a,t){e.exports=t(77)},5:function(e,a,t){e.exports={popup:"popup_popup__UQNqW",popup__content:"popup_popup__content__1N2O3",popup__image:"popup_popup__image__3fgVk",popup__contentImage:"popup_popup__contentImage__D_Iet",popup__close:"popup_popup__close__1F-4u",popup__title:"popup_popup__title__EdVIv",popup__form:"popup_popup__form__2YY4Q",popup__input:"popup_popup__input__R8ZUt",popup__button:"popup_popup__button__qPSp-",popup__button_user:"popup_popup__button_user__3KtTp",error:"popup_error__1d9do"}},57:function(e,a,t){},77:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(21),o=t.n(c),p=t(6),u=(t(57),t(13)),l=t.n(u),s=t(10),_=t.n(s),i=t(40),d=t.n(i),m=t(11),b=t(14),f=t.n(b),E="edit-submit",O="add-card-submit",y="open-popup-card",v="open-popup-edit",j=t(20),C=t.n(j),k=function(e){return{type:"OPEN_EDIT_POPUP",payload:e.payload}},P=function(e){return{type:"OPEN_ADD_CARD_POPUP",payload:e.payload}},I=function(e){return{type:"OPEN_IMAGE_POPUP",payload:e.payload}},N=function(e){var a=e.type,t=e.className,n=e.disabled,c=Object(p.b)();switch(a){case y:return r.a.createElement("button",{onClick:function(){return c(P({type:"OPEN_ADD_CARD_POPUP",payload:!0}))},className:_()(C.a.button,t),disabled:n,style:{cursor:n?"wait":"pointer"}},"+");case v:return r.a.createElement("button",{onClick:function(){return c(k({type:"OPEN_EDIT_POPUP",payload:!0}))},className:t},"Edit")}},D=t(4),A=t(17),g=t.n(A),h=t(5),x=t.n(h),R=function(e){var a=e.type,t=e.className;switch(a){case E:case O:return r.a.createElement("button",{type:"submit",className:_()(C.a.button,t)},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c")}return r.a.createElement("div",null)},S=function(){var e=Object(p.b)(),a=Object(n.useState)({name:"",link:""}),t=Object(m.a)(a,2),c=t[0],o=t[1];Object(n.useEffect)((function(){document.addEventListener("keydown",(function(a){"Escape"===String(a.key)&&e(P({type:"OPEN_ADD_CARD_POPUP",payload:!1}))}))}),[]);return r.a.createElement("div",{id:"addUserPopup",className:x.a.popup},r.a.createElement("div",{className:x.a.popup__content},r.a.createElement("img",{onClick:function(){return e(P({type:"OPEN_ADD_CARD_POPUP",payload:!1}))},src:g.a,alt:"close",className:x.a.popup__close}),r.a.createElement("h3",{className:x.a.popup__title},"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e"),r.a.createElement("form",{onSubmit:function(a){a.preventDefault(),e({type:"CREATE_CARD",payload:{type:"CREATE_CARD",payload:c}.payload}),e(P({type:"OPEN_ADD_CARD_POPUP",payload:!1})),e({type:"POST_ADD_CARD"})},className:x.a.popup__form,noValidate:!0,name:"new"},r.a.createElement("div",{className:"input-container "},r.a.createElement("input",{onChange:function(e){return o(Object(D.a)(Object(D.a)({},c),{},{name:e.target.value}))},id:"title",type:"text",name:"title",className:x.a.popup__input,placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",required:!0}),r.a.createElement("span",{id:"title-error",className:x.a.error})),r.a.createElement("div",{className:"input-container "},r.a.createElement("input",{onChange:function(e){return o(Object(D.a)(Object(D.a)({},c),{},{link:e.target.value}))},id:"url",type:"url",required:!0,name:"link",className:x.a.popup__input,placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443"}),r.a.createElement("span",{id:"url-error",className:x.a.error})),r.a.createElement(R,{type:O,className:_()(x.a.popup__button,x.a.popup__button_user)}))))},w=function(e){var a=e.popupStore,t=Object(p.c)((function(e){return e.cards.items})),c=Object(p.c)((function(e){return e.user})).user,o=Object(n.useState)(!1),u=Object(m.a)(o,2),l=u[0],s=u[1];return Object(n.useEffect)((function(){s(0===(null===t||void 0===t?void 0:t.length)&&!0)}),[t.length]),r.a.createElement("div",{className:f.a.userInfo},r.a.createElement("div",{className:f.a.userInfo__photo}),r.a.createElement("div",{className:f.a.userInfo__data},r.a.createElement("h1",{className:f.a.userInfo__name},c.name),r.a.createElement("p",{className:f.a.userInfo__job},c.about),r.a.createElement(N,{type:v,className:f.a.userInfo__btnEdit,disabled:!0})),r.a.createElement(N,{type:y,className:f.a.userInfo__button,disabled:l}),a.openAddCard&&r.a.createElement(S,null))},U=function(){var e=Object(p.b)();Object(n.useEffect)((function(){document.addEventListener("keydown",(function(a){"Escape"===String(a.key)&&e(k({type:"OPEN_EDIT_POPUP",payload:!1}))}))}),[]);var a=Object(n.useState)({name:"",about:""}),t=Object(m.a)(a,2),c=t[0],o=t[1];return r.a.createElement("div",{id:"addUserPopup",className:x.a.popup},r.a.createElement("div",{className:x.a.popup__content},r.a.createElement("img",{className:x.a.popup__close,src:g.a,alt:"close",onClick:function(){return e(k({type:"OPEN_EDIT_POPUP",payload:!1}))}}),r.a.createElement("h3",{className:x.a.popup__title},"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c"),r.a.createElement("form",{onSubmit:function(a){a.preventDefault(),e({type:"EDIT_USER",payload:{type:"EDIT_USER",payload:c}.payload}),e(k({type:"OPEN_EDIT_POPUP",payload:!1})),e({type:"PATCH_USER"})},className:x.a.popup__form,noValidate:!0,name:"new"},r.a.createElement("div",{className:"input-container "},r.a.createElement("input",{onChange:function(e){return o(Object(D.a)(Object(D.a)({},c),{},{name:e.target.value}))},id:"name",type:"text",name:"name",required:!0,className:x.a.popup__input,placeholder:"\u0418\u043c\u044f"}),r.a.createElement("span",{id:"name-error",className:x.a.error}),r.a.createElement("div",{className:"input-container "},r.a.createElement("input",{onChange:function(e){return o(Object(D.a)(Object(D.a)({},c),{},{about:e.target.value}))},id:"job",type:"text",name:"job",required:!0,className:x.a.popup__input,placeholder:"\u041e \u0441\u0435\u0431\u0435"}),r.a.createElement("span",{id:"job-error",className:x.a.error})),r.a.createElement(R,{type:E,className:"".concat(x.a.popup__button," ").concat(x.a.popup__button_user)})))))},T=function(){var e=Object(p.c)((function(e){return e.popup}));return r.a.createElement("div",{className:_()(d.a.profile,l.a.root__section)},r.a.createElement(w,{popupStore:e}),e.openEdit&&r.a.createElement(U,null))},L=t(41),G=t.n(L),V=t(15),q=t.n(V),M=t(29),z=t.n(M),F=t(30),K=t.n(F),Q=function(e){var a=e.item,t=e.openPopupImage,c=Object(p.b)(),o=Object(p.c)((function(e){return e.user.user})),u=Object(n.useState)(!1),l=Object(m.a)(u,2),s=l[0],_=l[1];Object(n.useEffect)((function(){var e=1===a.likes.filter((function(e){return e._id===o._id})).length;_(e)}),[a]);return r.a.createElement("div",{className:q.a.placeCard},r.a.createElement("div",{onClick:function(e){return t(a)},id:"pic",className:q.a.placeCard__image,style:{backgroundImage:"url(".concat(a.link,")")}}),r.a.createElement("button",{onClick:function(e){return function(e){c({type:"DELETE_CARD",payload:{type:"DELETE_CARD",payload:e._id}.payload}),c({type:"DELETE_CARD_SAGA"})}(a)},className:q.a.placeCard__deleteIcon}),r.a.createElement("div",{className:q.a.placeCard__description},r.a.createElement("h3",{className:q.a.placeCard__name},a.name),r.a.createElement("div",null,r.a.createElement("img",{onClick:function(e){return t=a._id,c({type:"LIKE_CARD",payload:{likeId:t,removeLike:!!s||s}}),void c({type:"LIKE_CARD_SAGA"});var t},src:s?z.a:K.a,alt:"like",className:q.a.placeCard__likeIcon}),r.a.createElement("p",{className:q.a.placeCard__likeNumber},a.likes.length))))},H=function(e){var a=e.itemLink,t=Object(p.b)();Object(n.useEffect)((function(){document.addEventListener("keydown",(function(e){"Escape"===String(e.key)&&t(I({type:"OPEN_IMAGE_POPUP",payload:!1}))}))}),[]);return r.a.createElement("div",{id:"imagePopup",className:x.a.popup},r.a.createElement("div",{className:x.a.popup__contentImage},r.a.createElement("img",{onClick:function(){t({type:"OPEN_IMAGE_POPUP",payload:!1})},src:g.a,alt:"close",className:x.a.popup__close}),r.a.createElement("img",{src:a,className:x.a.popup__image,alt:""})))};var J=function(){var e=Object(p.b)(),a=Object(p.c)((function(e){return e.cards.items})),t=Object(p.c)((function(e){return e.popup})),c=Object(n.useState)(""),o=Object(m.a)(c,2),u=o[0],s=o[1],i=Object(n.useState)([]),d=Object(m.a)(i,2),b=d[0],f=d[1];Object(n.useEffect)((function(){f(a)}),[a||b]);var E=function(a){s(a.link),e(I({type:"OPEN_IMAGE_POPUP",payload:!0}))};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:_()(G.a.placesList,l.a.root__section)},b.map((function(e){return r.a.createElement(Q,{openPopupImage:E,item:e})})),t.openImage&&r.a.createElement(H,{itemLink:u})))},Z=t(42),W=t.n(Z),X=t(43),Y=t.n(X),B=t(44),$=t.n(B),ee=function(){return r.a.createElement("img",{className:Y.a.logo,src:$.a,alt:"logo"})},ae=function(){return r.a.createElement("header",{className:_()(W.a.header,l.a.root__section)},r.a.createElement(ee,null))},te=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:l.a.root},r.a.createElement(ae,null),r.a.createElement(T,null),r.a.createElement(J,null)))},ne=t(12),re={openEdit:!1,openAddCard:!1,openImage:!1},ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"OPEN_EDIT_POPUP":return Object(D.a)(Object(D.a)({},e),{},{openEdit:a.payload});case"OPEN_ADD_CARD_POPUP":return Object(D.a)(Object(D.a)({},e),{},{openAddCard:a.payload});case"OPEN_IMAGE_POPUP":return Object(D.a)(Object(D.a)({},e),{},{openImage:a.payload});default:return e}},oe=t(24),pe={items:[],createCard:{link:"",name:""},addCard:{_id:"",link:"",name:"",likes:[]},deleteCardId:0,likeId:"",removeLike:!1},ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe,a=arguments.length>1?arguments[1]:void 0;switch(console.log(a),a.type){case"LOAD_CARDS":return Object(D.a)(Object(D.a)({},e),{},{items:a.payload});case"CREATE_CARD":return Object(D.a)(Object(D.a)({},e),{},{createCard:{link:a.payload.link,name:a.payload.name}});case"ADD_CARD":var t;return t={likes:[],_id:a.payload._id,link:a.payload.link,name:a.payload.name},Object(D.a)(Object(D.a)({},e),{},{createCard:t,items:[].concat(Object(oe.a)(e.items),[t])});case"DELETE_CARD":var n=e.items.filter((function(e){return e._id!==a.payload}));return Object(D.a)(Object(D.a)({},e),{},{deleteCardId:a.payload,items:Object(oe.a)(n)});case"LIKE_CARD":return Object(D.a)(Object(D.a)({},e),{},{likeId:a.payload.likeId,removeLike:a.payload.removeLike});case"FAVORITE_CARD":var r=e.items,c=e.items.findIndex((function(e){return e._id===a.payload._id}));return r.splice(c,1,a.payload),Object(D.a)(Object(D.a)({},e),{},{items:Object(oe.a)(r)});default:return e}},le={user:{about:"",avatar:"",cohort:"",name:"",_id:""}},se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"EDIT_USER":return Object(D.a)(Object(D.a)({},e),{},{user:{about:a.payload.about,avatar:a.payload.avatar,cohort:a.payload.cohort,name:a.payload.name,_id:a.payload._id}});default:return e}},_e=t(45),ie=t(8),de=t.n(ie),me=t(7),be=t(16),fe=t.n(be),Ee=de.a.mark(Se),Oe=de.a.mark(we),ye=de.a.mark(Ue),ve=de.a.mark(Te),je=de.a.mark(Le),Ce=de.a.mark(Ge),ke=de.a.mark(Ve),Pe="https://nomoreparties.co/cohort11",Ie={headers:{Authorization:"f19dbf25-1050-4e87-9f03-ebd68dde2c37"}},Ne=function(){return fe.a.get("".concat(Pe,"/cards"),Ie)},De=function(e){return fe.a.patch("".concat(Pe,"/users/me"),e,Ie)},Ae=function(){return fe.a.get("".concat(Pe,"/users/me"),Ie)},ge=function(e){return fe.a.post("".concat(Pe,"/cards"),e,Ie)},he=function(e){return fe.a.delete("".concat(Pe,"/cards/").concat(e),Ie)},xe=function(e){return fe.a.put("".concat(Pe,"/cards/like/").concat(e),{id:e},Ie)},Re=function(e){return fe.a.delete("".concat(Pe,"/cards/like/").concat(e),Ie)};function Se(){var e,a,t,n,r;return de.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,c.next=3,Object(me.d)();case 3:if(e=c.sent,!(a=e.cards).removeLike){c.next=12;break}return c.next=8,Object(me.b)(Re,a.likeId);case 8:n=c.sent,t={_id:n.data._id,link:n.data.link,name:n.data.name,likes:n.data.likes},c.next=16;break;case 12:return c.next=14,Object(me.b)(xe,a.likeId);case 14:r=c.sent,t={_id:r.data._id,link:r.data.link,name:r.data.name,likes:r.data.likes};case 16:return c.next=18,Object(me.c)({type:"FAVORITE_CARD",payload:{type:"FAVORITE_CARD",payload:t}.payload});case 18:c.next=23;break;case 20:c.prev=20,c.t0=c.catch(0),console.log(c.t0);case 23:case"end":return c.stop()}}),Ee,null,[[0,20]])}function we(){var e,a,t;return de.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(me.d)();case 2:return e=n.sent,a=e.cards,t=a.deleteCardId,n.next=7,Object(me.b)(he,t);case 7:case"end":return n.stop()}}),Oe)}function Ue(){var e,a,t,n;return de.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(me.d)();case 3:return e=r.sent,a=e.cards,r.next=7,Object(me.b)(ge,a.createCard);case 7:return t=r.sent,n={_id:t.data._id,link:t.data.link,name:t.data.name,likes:t.data.likes},r.next=11,Object(me.c)({type:"ADD_CARD",payload:{type:"ADD_CARD",payload:n}.payload});case 11:r.next=16;break;case 13:r.prev=13,r.t0=r.catch(0),console.log(r.t0);case 16:case"end":return r.stop()}}),ye,null,[[0,13]])}function Te(){var e;return de.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(me.b)(Ae);case 3:return e=a.sent,a.next=6,Object(me.c)({type:"EDIT_USER",payload:e.data});case 6:a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),console.log(a.t0);case 11:case"end":return a.stop()}}),ve,null,[[0,8]])}function Le(e){var a;return de.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(me.b)(Ne);case 3:return a=e.sent,e.next=6,Object(me.c)({type:"LOAD_CARDS",payload:a.data});case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),je,null,[[0,8]])}function Ge(){var e,a;return de.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(me.d)();case 3:return e=t.sent,a=e.user,t.next=7,Object(me.b)(De,a.user);case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0);case 12:case"end":return t.stop()}}),Ce,null,[[0,9]])}function Ve(){return de.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(me.e)("PATCH_USER",Ge);case 2:return e.next=4,Object(me.e)("POST_ADD_CARD",Ue);case 4:return e.next=6,Object(me.e)("DELETE_CARD_SAGA",we);case 6:return e.next=8,Object(me.e)("LIKE_CARD_SAGA",Se);case 8:return e.next=10,Object(me.a)([Le(),Te()]);case 10:case"end":return e.stop()}}),ke)}var qe=Object(_e.a)(),Me=Object(ne.c)({popup:ce,cards:ue,user:se}),ze=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ne.d,Fe=Object(ne.e)(Me,ze(Object(ne.a)(qe)));qe.run(Ve);var Ke=Fe;o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(p.a,{store:Ke},r.a.createElement(te,null))),document.getElementById("root"))}},[[46,1,2]]]);
//# sourceMappingURL=main.8697f77d.chunk.js.map
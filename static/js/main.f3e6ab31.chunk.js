(this["webpackJsonpcard-editor-react"]=this["webpackJsonpcard-editor-react"]||[]).push([[0],{13:function(e,a,t){e.exports={root:"App_root__2q3oI",root__section:"App_root__section__1e4n_"}},15:function(e,a,t){e.exports={userInfo:"userInfo_userInfo__19G6_",userInfo__photo:"userInfo_userInfo__photo__N60hs",userInfo__data:"userInfo_userInfo__data__3SShx",userInfo__name:"userInfo_userInfo__name__3IhXa",userInfo__job:"userInfo_userInfo__job__3-pzT",userInfo__btnEdit:"userInfo_userInfo__btnEdit__3IePE",userInfo__button:"userInfo_userInfo__button__21zgC"}},16:function(e,a,t){e.exports={placeCard:"placeCard_placeCard__2VbrE",placeCard__image:"placeCard_placeCard__image__2zy-S",placeCard__deleteIcon:"placeCard_placeCard__deleteIcon__3ZiNQ",placeCard__description:"placeCard_placeCard__description__35mzw",placeCard__name:"placeCard_placeCard__name__WEOqV",placeCard__likeIcon:"placeCard_placeCard__likeIcon__HZn_u",placeCard__likeIconLiked:"placeCard_placeCard__likeIconLiked__Piglr",placeCard__likeNumber:"placeCard_placeCard__likeNumber__1PcKL"}},18:function(e,a,t){e.exports=t.p+"static/media/close.a3e3d9bd.svg"},21:function(e,a,t){e.exports={button:"button_button__2K9y5"}},38:function(e,a,t){e.exports={header:"header_header__29J7q"}},39:function(e,a,t){e.exports={logo:"logo_logo__1fFMn"}},40:function(e,a,t){e.exports=t.p+"static/media/logo.9d0e3a93.svg"},41:function(e,a,t){e.exports={profile:"profile_profile__2Gl8U"}},42:function(e,a,t){e.exports={placesList:"placesList_placesList__1cozs"}},45:function(e,a,t){e.exports=t(76)},5:function(e,a,t){e.exports={popup:"popup_popup__UQNqW",popup__content:"popup_popup__content__1N2O3",popup__image:"popup_popup__image__3fgVk",popup__contentImage:"popup_popup__contentImage__D_Iet",popup__close:"popup_popup__close__1F-4u",popup__title:"popup_popup__title__EdVIv",popup__form:"popup_popup__form__2YY4Q",popup__input:"popup_popup__input__R8ZUt",popup__button:"popup_popup__button__qPSp-",popup__button_user:"popup_popup__button_user__3KtTp"}},56:function(e,a,t){},76:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(22),o=t.n(c),p=t(6),u=(t(56),t(13)),l=t.n(u),s=t(38),_=t.n(s),i=t(39),d=t.n(i),m=t(40),f=t.n(m);var E=function(){return r.a.createElement("img",{className:d.a.logo,src:f.a,alt:"mesto logo"})};var b=function(){return r.a.createElement("header",{className:[_.a.header,l.a.root__section].join(" ")},r.a.createElement(E,null))},O=t(10),y=t.n(O),v=t(41),j=t.n(v),P=t(11),N=t(15),C=t.n(N),g="edit-submit",I="add-card-submit",h="open-popup-card",D="open-popup-edit",k=t(21),A=t.n(k),x=function(e){return{type:"OPEN_EDIT_POPUP",payload:e.payload}},w=function(e){return{type:"OPEN_ADD_CARD_POPUP",payload:e.payload}},S=function(e){return{type:"OPEN_IMAGE_POPUP",payload:e.payload}},U=function(e){var a=e.type,t=e.className,n=e.disabled,c=Object(p.b)();switch(a){case h:return r.a.createElement("button",{onClick:function(){return c(w({type:"OPEN_ADD_CARD_POPUP",payload:!0}))},className:y()(A.a.button,t),disabled:n},"+");case D:return r.a.createElement("button",{onClick:function(){return c(x({type:"OPEN_EDIT_POPUP",payload:!0}))},className:t},"Edit")}},R=t(14),L=t(4),T=t(18),q=t.n(T),G=t(5),M=t.n(G),V=function(e){var a=e.type,t=e.className;Object(p.b)();switch(a){case g:case I:return r.a.createElement("button",{type:"submit",className:y()(A.a.button,t)},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c")}return r.a.createElement("div",null)},z=function(e){return{type:"ADD_CARD",payload:e.payload}},W=function(){var e=Object(p.b)(),a=Object(n.useState)({name:"",link:""}),t=Object(P.a)(a,2),c=t[0],o=t[1];Object(n.useEffect)((function(){document.addEventListener("keydown",(function(a){"Escape"===String(a.key)&&e(w({type:"OPEN_ADD_CARD_POPUP",payload:!1}))}))}),[]);return r.a.createElement("div",{id:"addUserPopup",className:M.a.popup},r.a.createElement("div",{className:M.a.popup__content},r.a.createElement("img",{onClick:function(){return e(w({type:"OPEN_ADD_CARD_POPUP",payload:!1}))},src:q.a,alt:"close",className:M.a.popup__close}),r.a.createElement("h3",{className:M.a.popup__title},"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e"),r.a.createElement("form",{onSubmit:function(a){a.preventDefault(),e(z({type:"ADD_CARD",payload:c})),e(w({type:"OPEN_ADD_CARD_POPUP",payload:!1})),e({type:"POST_ADD_CARD"})},className:M.a.popup__form,noValidate:!0,name:"new"},r.a.createElement("div",{className:"input-container "},r.a.createElement("input",Object(R.a)({onChange:function(e){return o(Object(L.a)(Object(L.a)({},c),{},{name:e.target.value}))},id:"title",type:"text",minLength:"2",maxLength:"30",required:!0,name:"title",className:M.a.popup__input,placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"},"required",!0)),r.a.createElement("span",{id:"title-error",className:"error"})),r.a.createElement("div",{className:"input-container "},r.a.createElement("input",Object(R.a)({onChange:function(e){return o(Object(L.a)(Object(L.a)({},c),{},{link:e.target.value}))},id:"url",type:"url",required:!0,name:"link",className:M.a.popup__input,placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443"},"required",!0)),r.a.createElement("span",{id:"url-error",className:"error"})),r.a.createElement(V,{type:I,className:y()(M.a.popup__button,M.a.popup__button_user)}))))},H=function(e){var a=e.popupStore,t=Object(p.c)((function(e){return e.cards.items})),c=Object(p.c)((function(e){return e.user})).user,o=Object(n.useState)(!1),u=Object(P.a)(o,2),l=u[0],s=u[1];return Object(n.useEffect)((function(){s(0===(null===t||void 0===t?void 0:t.length)&&!0)}),[t.length]),r.a.createElement("div",{className:C.a.userInfo},r.a.createElement("div",{className:C.a.userInfo__photo}),r.a.createElement("div",{className:C.a.userInfo__data},r.a.createElement("h1",{className:C.a.userInfo__name},c.name),r.a.createElement("p",{className:C.a.userInfo__job},c.about),r.a.createElement(U,{type:D,className:C.a.userInfo__btnEdit})),r.a.createElement(U,{type:h,className:C.a.userInfo__button,disabled:l}),a.openAddCard&&r.a.createElement(W,null))},J=function(){var e=Object(p.b)();Object(n.useEffect)((function(){document.addEventListener("keydown",(function(a){"Escape"===String(a.key)&&e(x({type:"OPEN_EDIT_POPUP",payload:!1}))}))}),[]);var a=Object(n.useState)({name:"",about:""}),t=Object(P.a)(a,2),c=t[0],o=t[1];return r.a.createElement("div",{id:"addUserPopup",className:M.a.popup},r.a.createElement("div",{className:M.a.popup__content},r.a.createElement("img",{className:M.a.popup__close,src:q.a,alt:"close",onClick:function(){return e(x({type:"OPEN_EDIT_POPUP",payload:!1}))}}),r.a.createElement("h3",{className:M.a.popup__title},"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c"),r.a.createElement("form",{onSubmit:function(a){a.preventDefault(),e({type:"EDIT_USER",payload:{type:"EDIT_USER",payload:c}.payload}),e(x({type:"OPEN_EDIT_POPUP",payload:!1})),e({type:"PATCH_USER"})},className:M.a.popup__form,noValidate:!0,name:"new"},r.a.createElement("div",{className:"input-container "},r.a.createElement("input",Object(R.a)({onChange:function(e){return o(Object(L.a)(Object(L.a)({},c),{},{name:e.target.value}))},id:"name",type:"text",minLength:"2",maxLength:"30",name:"name",required:!0,className:M.a.popup__input,placeholder:"\u0418\u043c\u044f"},"required",!0)),r.a.createElement("span",{id:"name-error",className:M.a.error}),r.a.createElement("div",{className:"input-container "},r.a.createElement("input",Object(R.a)({onChange:function(e){return o(Object(L.a)(Object(L.a)({},c),{},{about:e.target.value}))},id:"job",type:"text",minLength:"2",maxLength:"30",name:"job",required:!0,className:M.a.popup__input,placeholder:"\u041e \u0441\u0435\u0431\u0435"},"required",!0)),r.a.createElement("span",{id:"job-error",className:M.a.error})),r.a.createElement(V,{type:g,className:"".concat(M.a.popup__button," ").concat(M.a.popup__button_user)})))))},K=function(){var e=Object(p.c)((function(e){return e.popup}));return r.a.createElement("div",{className:y()(j.a.profile,l.a.root__section)},r.a.createElement(H,{popupStore:e}),e.openEdit&&r.a.createElement(J,null))},Q=t(44),X=t(42),Z=t.n(X),B=t(16),F=t.n(B);var Y=function(e){var a=e.item,t=e.openPopupImage,n=Object(p.b)();return r.a.createElement("div",{className:F.a.placeCard},r.a.createElement("div",{onClick:function(e){return t(a)},id:"pic",className:F.a.placeCard__image,style:{backgroundImage:"url(".concat(a.link,")")}}),r.a.createElement("button",{onClick:function(e){return function(e){n({type:"DELETE_CARD",payload:{type:"DELETE_CARD",payload:e._id}.payload}),n({type:"DELETE_CARD_SAGA"})}(a)},className:F.a.placeCard__deleteIcon}),r.a.createElement("div",{className:F.a.placeCard__description},r.a.createElement("h3",{className:F.a.placeCard__name},a.name),r.a.createElement("div",null,r.a.createElement("button",{className:F.a.placeCard__likeIcon}),r.a.createElement("p",{className:F.a.placeCard__likeNumber},a.likes.length))))},$=function(e){var a=e.itemLink,t=Object(p.b)();Object(n.useEffect)((function(){document.addEventListener("keydown",(function(e){"Escape"===String(e.key)&&t(S({type:"OPEN_IMAGE_POPUP",payload:!1}))}))}),[]);return r.a.createElement("div",{id:"imagePopup",className:M.a.popup},r.a.createElement("div",{className:M.a.popup__contentImage},r.a.createElement("img",{onClick:function(){t({type:"OPEN_IMAGE_POPUP",payload:!1})},src:q.a,alt:"close",className:M.a.popup__close}),r.a.createElement("img",{src:a,className:M.a.popup__image,alt:""})))};var ee=function(){var e=Object(p.b)(),a=Object(p.c)((function(e){return e.cards.items})),t=Object(p.c)((function(e){return e.cards.createCard})),c=Object(p.c)((function(e){return e.popup})),o=Object(n.useState)(""),u=Object(P.a)(o,2),s=u[0],_=u[1],i=Object(n.useState)([]),d=Object(P.a)(i,2),m=d[0],f=d[1];Object(n.useEffect)((function(){f(a)}),[a]),Object(n.useEffect)((function(){0!==a.length&&f([].concat(Object(Q.a)(m),[t]))}),[t]);var E=function(a){_(a.link),e(S({type:"OPEN_IMAGE_POPUP",payload:!0}))};return r.a.createElement("div",{className:[Z.a.placesList,l.a.root__section].join(" ")},m.map((function(e){return r.a.createElement(Y,{openPopupImage:E,item:e})})),c.openImage&&r.a.createElement($,{itemLink:s}))},ae=t(17),te=t.n(ae);var ne=function(){return r.a.createElement("div",{className:l.a.root},r.a.createElement(b,null),r.a.createElement(K,null),r.a.createElement(ee,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var re=t(12),ce={openEdit:!1,openAddCard:!1,openImage:!1},oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"OPEN_EDIT_POPUP":return Object(L.a)(Object(L.a)({},e),{},{openEdit:a.payload});case"OPEN_ADD_CARD_POPUP":return Object(L.a)(Object(L.a)({},e),{},{openAddCard:a.payload});case"OPEN_IMAGE_POPUP":return Object(L.a)(Object(L.a)({},e),{},{openImage:a.payload});default:return e}},pe={items:[],createCard:{link:"",name:"",likes:[]},deleteCardId:0},ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe,a=arguments.length>1?arguments[1]:void 0;switch(console.log(a),a.type){case"LOAD_CARDS":return Object(L.a)(Object(L.a)({},e),{},{items:a.payload});case"ADD_CARD":var t;return t={link:a.payload.link,name:a.payload.name,likes:[]},Object(L.a)(Object(L.a)({},e),{},{createCard:t});case"DELETE_CARD":return Object(L.a)(Object(L.a)({},e),{},{deleteCardId:a.payload});default:return e}},le={user:{name:"",about:""}},se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"EDIT_USER":return Object(L.a)(Object(L.a)({},e),{},{user:{name:a.payload.name,about:a.payload.about}});default:return e}},_e=t(43),ie=t(9),de=t.n(ie),me=t(7),fe=de.a.mark(De),Ee=de.a.mark(ke),be=de.a.mark(Ae),Oe=de.a.mark(xe),ye=de.a.mark(we),ve=de.a.mark(Se),je="https://nomoreparties.co/cohort11",Pe={headers:{Authorization:"f19dbf25-1050-4e87-9f03-ebd68dde2c37"}},Ne=function(){return te.a.get("".concat(je,"/cards"),Pe)},Ce=function(e){return te.a.patch("".concat(je,"/users/me"),e,Pe)},ge=function(){return te.a.get("".concat(je,"/users/me"),Pe)},Ie=function(e){return te.a.post("".concat(je,"/cards"),e,Pe)},he=function(e){return te.a.delete("".concat(je,"/cards/").concat(e),Pe)};function De(){var e,a,t;return de.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(me.d)();case 2:return e=n.sent,a=e.cards,t=a.deleteCardId,n.next=7,Object(me.b)(he,t);case 7:console.log(a.deleteCardId);case 8:case"end":return n.stop()}}),fe)}function ke(){var e,a;return de.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(me.d)();case 3:return e=t.sent,a=e.cards,t.next=7,Object(me.c)(z({type:"ADD_CARD",payload:a.createCard}));case 7:return t.next=9,Object(me.b)(Ie,a.createCard);case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0);case 14:case"end":return t.stop()}}),Ee,null,[[0,11]])}function Ae(){var e;return de.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(me.b)(ge);case 3:return e=a.sent,a.next=6,Object(me.c)({type:"EDIT_USER",payload:e.data});case 6:a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),console.log(a.t0);case 11:case"end":return a.stop()}}),be,null,[[0,8]])}function xe(e){var a;return de.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(me.b)(Ne);case 3:return a=e.sent,e.next=6,Object(me.c)({type:"LOAD_CARDS",payload:a.data});case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),Oe,null,[[0,8]])}function we(){var e,a;return de.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(me.d)();case 3:return e=t.sent,a=e.user,t.next=7,Object(me.b)(Ce,a.user);case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0);case 12:case"end":return t.stop()}}),ye,null,[[0,9]])}function Se(){return de.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(me.e)("PATCH_USER",we);case 2:return e.next=4,Object(me.e)("POST_ADD_CARD",ke);case 4:return e.next=6,Object(me.e)("DELETE_CARD_SAGA",De);case 6:return e.next=8,Object(me.a)([xe(),Ae()]);case 8:case"end":return e.stop()}}),ve)}var Ue=Object(_e.a)(),Re=Object(re.c)({popup:oe,cards:ue,user:se}),Le=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||re.d,Te=Object(re.e)(Re,Le(Object(re.a)(Ue)));Ue.run(Se);var qe=Te;o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(p.a,{store:qe},r.a.createElement(ne,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[45,1,2]]]);
//# sourceMappingURL=main.f3e6ab31.chunk.js.map